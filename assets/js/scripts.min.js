function initCan(){

  window.onload = init;
  var can;

  function init(){

    var canHeight  = 675;
    var canWidth   = 250;
    var divWidth   = $('#spinner--wrapper').width();
    var scaled     = divWidth/canWidth;
    var realHeight = canHeight*scaled;

    function loadedCan(){
      $('.loader-img').fadeOut();
      $('#spinner-tabs').fadeIn();
    }

    $('.can').css({
      height: realHeight,
      width:  divWidth
    });

    can = $('.can').ThreeSixty({
      totalFrames:      180,
      endFrame:         180,
      currentFrame:     1,
      framerate:        60,

      // progress:         '.spinner',
      // imagePath:        '/assets/img/png/',
      // filePrefix:       'Warriors_v02.',
      // ext:              '.png',

      // progress:         '.spinner',
      // imagePath:        '/assets/img/jpg-black/',
      // filePrefix:       'rb_can-',
      // ext:              '.jpg',

      // progress:         '.spinner',
      // imagePath:        '/assets/img/can/',
      // filePrefix:       'rb-warriors-',
      // ext:              '.gif',

      progress:         '.spinner',
      imagePath:        '/assets/img/png-8/',
      filePrefix:       'warriors-',
      ext:              '.png',

      height:           realHeight,
      width:            divWidth,
      navigation:       false,
      responsive:       true,
      onReady:          function(){ loadedCan() },
    });

  }

}

initCan();

function aboutHover(){

  var speed = 200;

  $("#home--view-gallery").hover(
    function() {
      $("#home--about_bg").stop(true, true).transition({
        opacity : 1,
        zIndex: 3,
      },speed,'ease');
      $("#home--about_title").stop(true, true).transition({
        opacity : 0,
      },speed,'ease');
      $("#home--about_info .section-content").stop(true, true).transition({
        opacity : .25,
        paddingTop: '10px',
      },speed,'ease',function(){
        $(this).transition({
          zIndex: 2,
        },speed);
      },speed,'ease');
    },
    function() {
      $("#home--about_bg").stop(true, true).transition({
        opacity : .5,
        zIndex: 1,
      },speed,'ease');
      $("#home--about_title").stop(true, true).transition({
        opacity : 1,
      },speed,'ease');
      $("#home--about_info .section-content").stop(true, true).transition({
        opacity : 1,
        paddingTop: '0',
      },speed,'ease');
    }
  );

}

// @codekit-prepend "og.js"
// @codekit-prepend "_abouthover.js"

function randomInit(){

  $("#home--about_wrapper, .video-wrapper").equalize({
    target: ".sized"
  });

  $(".video-wrapper").fitVids();

}

function canOverlay(){

  $('body').css('overflow', 'hidden');
  $("#spinner--overlay").transition({opacity:1,}).addClass('active');
  $("#spinner--wrapper").css({zIndex:100,position:'relative'}).addClass('active');

}

function canOverlay_close(){

  $('body').css('overflow', 'visible');
  $("#spinner--overlay").transition({opacity:0}).removeClass('active');
  $("#spinner--wrapper").css({zIndex:100,position:'relative'}).addClass('active');
  $("#spinner--container .tab").removeClass('fs-tabs-active');

}

function headerjunk(){

  var options = {
    offset: 100,
    classes: {
      clone:   'banner--clone',
      stick:   'banner--stick',
      unstick: 'banner--unstick'
    }
  };
  var banner = new Headhesive('#home--can_nav', options);

}


$(document).ready(function(){

  randomInit();
  headerjunk();
  aboutHover();

  $(".gps_ring").click(function(){
    canOverlay();
    $(".gps_ring").removeClass('active');
    $(this).addClass('active');
  });

  $("#spinner--overlay_close").click(function(){
    canOverlay_close();
  });

});

