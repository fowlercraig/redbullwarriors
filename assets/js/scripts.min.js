function initCan(){

  window.onload = init;
  var can;

  function init(){

    var canHeight  = 675;
    var canWidth   = 250;
    var divWidth   = $('#spinner--wrapper').width();
    var scaled     = divWidth/canWidth;
    var realHeight = canHeight*scaled;

    function loadedCan(){
      $('.loader-img').fadeOut();
      $('#spinner-tabs').fadeIn();
    }

    $('.can').css({
      height: realHeight,
      width:  divWidth
    });

    can = $('.can').ThreeSixty({
      totalFrames:      180,
      endFrame:         180,
      currentFrame:     1,
      framerate:        60,

      // progress:         '.spinner',
      // imagePath:        '/assets/img/png/',
      // filePrefix:       'Warriors_v02.',
      // ext:              '.png',

      // progress:         '.spinner',
      // imagePath:        '/assets/img/jpg-black/',
      // filePrefix:       'rb_can-',
      // ext:              '.jpg',

      // progress:         '.spinner',
      // imagePath:        '/assets/img/can/',
      // filePrefix:       'rb-warriors-',
      // ext:              '.gif',

      progress:         '.spinner',
      imagePath:        '/assets/img/png-8/',
      filePrefix:       'warriors-',
      ext:              '.png',

      height:           realHeight,
      width:            divWidth,
      navigation:       false,
      responsive:       true,
      onReady:          function(){ loadedCan() },
    });

  }

}

initCan();

function aboutHover(){

  var speed = 200;

  $("#home--view-gallery").hover(
    function() {
      $("#home--about_bg").stop(true, true).transition({
        opacity : 1,
        zIndex: 3,
      },speed,'ease');
      $("#home--about_title").stop(true, true).transition({
        opacity : 0,
      },speed,'ease');
      $("#home--about_info .section-content").stop(true, true).transition({
        opacity : .25,
        paddingTop: '10px',
      },speed,'ease',function(){
        $(this).transition({
          zIndex: 2,
        },speed);
      },speed,'ease');
    },
    function() {
      $("#home--about_bg").stop(true, true).transition({
        opacity : .5,
        zIndex: 1,
      },speed,'ease');
      $("#home--about_title").stop(true, true).transition({
        opacity : 1,
      },speed,'ease');
      $("#home--about_info .section-content").stop(true, true).transition({
        opacity : 1,
        paddingTop: '0',
      },speed,'ease');
    }
  );

}

function smoothScroll(){
  $(function() {
    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({
            scrollTop: target.offset().top
          }, 400);
          return false;
        }
      }
    });
  });
}

smoothScroll();

function socialCarousels(){

  var autoplayspeed   = 4000;
  var transitionspeed = 1000;

  $('#tw-carousel-1').slick({
    infinite        : true,
    slidesToShow    : 1,
    slidesToScroll  : 1,
    vertical        : true,
    //autoplay        : true,
    //autoplaySpeed   : autoplayspeed,
    speed           : transitionspeed,
    arrows          : false,
    //rtl             : true,
  });

  $('#tw-carousel-2').slick({
    infinite        : true,
    slidesToShow    : 1,
    slidesToScroll  : 1,
    vertical        : true,
    //autoplay        : true,
    //autoplaySpeed   : autoplayspeed,
    speed           : transitionspeed,
    arrows          : false
  });

  $('#social--slider .btn-left').click(function(){
    $('#tw-carousel-1').slick('slickPrev');
    $('#tw-carousel-2').slick('slickPrev');
  });

  $('#social--slider .btn-right').click(function(){
    $('#tw-carousel-1').slick('slickNext');
    $('#tw-carousel-2').slick('slickNext');
  });


}

// @codekit-prepend "og.js"
// @codekit-prepend "_abouthover.js"
// @codekit-prepend "_smoothscroll.js"
// @codekit-prepend "_socialcarousel.js"

function randomInit(){

  $("#home--about_wrapper, .video-wrapper").equalize({
    target: ".sized"
  });

  $(".video-wrapper").fitVids();

}

function canOverlay(){

  $('body').css('overflow', 'hidden');
  $("#spinner--overlay").transition({opacity:1,}).addClass('active');
  $("#spinner--wrapper").css({zIndex:100,position:'relative'}).addClass('active');

}

function canOverlay_close(){

  $('body').css('overflow', 'visible');
  $("#spinner--overlay").transition({opacity:0}).removeClass('active');
  $("#spinner--wrapper").css({zIndex:100,position:'relative'}).addClass('active');
  $("#spinner--container .tab").removeClass('fs-tabs-active');

}

function headerjunk(){

  var options = {
    offset: 100,
    classes: {
      clone:   'banner--clone',
      stick:   'banner--stick',
      unstick: 'banner--unstick'
    },
    onInit: function() {
      smoothScroll();
    },
  };
  var banner = new Headhesive('#home--can_nav', options);

}


$(document).ready(function(){

  randomInit();
  headerjunk();
  aboutHover();
  socialCarousels();

  $(".gps_ring").click(function(){
    canOverlay();
    $(".gps_ring").removeClass('active');
    $(this).addClass('active');
  });

  $("#spinner--overlay_close").click(function(){
    canOverlay_close();
  });

});

