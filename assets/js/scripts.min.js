// @codekit-append "og.js"

function canOverlay(){

  $('body').css('overflow', 'hidden');
  $("#spinner--overlay").transition({opacity:1,}).addClass('active');
  $("#spinner--wrapper").css({zIndex:100,position:'relative'}).addClass('active');

}

function canOverlay_close(){

  $('body').css('overflow', 'visible');
  $("#spinner--overlay").transition({opacity:0}).removeClass('active');
  $("#spinner--wrapper").css({zIndex:100,position:'relative'}).addClass('active');
  $("#spinner--container .tab").removeClass('fs-tabs-active');

}

function headerjunk(){

  var options = {
    offset: 100,
    classes: {
      clone:   'banner--clone',
      stick:   'banner--stick',
      unstick: 'banner--unstick'
    }
  };
  var banner = new Headhesive('#home--can_nav', options);

}


$(document).ready(function(){

  headerjunk();

  $(".gps_ring").click(function(){
    canOverlay();
    $(".gps_ring").removeClass('active');
    $(this).addClass('active');
  });

  $("#spinner--overlay_close").click(function(){
    canOverlay_close();
  });

});

function initCan(){

  window.onload = init;
  var can;

  function init(){

    var canHeight  = 675;
    var canWidth   = 250;
    var divWidth   = $('#spinner--wrapper').width();
    var scaled     = divWidth/canWidth;
    var realHeight = canHeight*scaled;

    function loadedCan(){
      $('.loader-img').fadeOut();
      $('#spinner-tabs').fadeIn();
    }

    $('.can').css({
      height: realHeight,
      width:  divWidth
    });

    can = $('.can').ThreeSixty({
      totalFrames:      180,
      endFrame:         180,
      currentFrame:     1,
      framerate:        60,

      // progress:         '.spinner',
      // imagePath:        '/assets/img/png/',
      // filePrefix:       'Warriors_v02.',
      // ext:              '.png',

      // progress:         '.spinner',
      // imagePath:        '/assets/img/jpg-black/',
      // filePrefix:       'rb_can-',
      // ext:              '.jpg',

      // progress:         '.spinner',
      // imagePath:        '/assets/img/can/',
      // filePrefix:       'rb-warriors-',
      // ext:              '.gif',

      progress:         '.spinner',
      imagePath:        '/assets/img/png-8/',
      filePrefix:       'warriors-',
      ext:              '.png',

      height:           realHeight,
      width:            divWidth,
      navigation:       false,
      responsive:       true,
      onReady:          function(){ loadedCan() },
    });

  }

}

initCan();

